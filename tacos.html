<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/f99dffaa0d.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css" />

    <title>Order</title>
  </head>

  <body>
    <!-- Navbar -->
    <script>
      document.write('<div id="topnavbar-container"></div>');
      fetch("topnavbar.html")
        .then((response) => response.text())
        .then((data) => (document.getElementById("topnavbar-container").innerHTML = data));
    </script>

    <div id="sidebar-container">
    </div>

    <div class="container-fluid menu-items" style="padding-left: 17rem; padding-top: 8rem">
      <div class="row" id="tacosMenu">
        <!-- Dynamic content will be added here -->
      </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
      import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-analytics.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBasI3Cfcv2NuSSdL9rUI__pYs-xUN7nm8",
        authDomain: "csad-restaurant-pos.firebaseapp.com",
        databaseURL: "https://csad-restaurant-pos-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "csad-restaurant-pos",
        storageBucket: "csad-restaurant-pos.appspot.com",
        messagingSenderId: "964704635393",
        appId: "1:964704635393:web:7a616e7814cb9c42348e00",
        measurementId: "G-SW0P8CW3WQ",
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db = getFirestore(app);

      // Fetch data from the "tacos" collection
      async function fetchTacos() {
        const tacosCollection = collection(db, "categories", "tacos", "items");
        const tacosSnapshot = await getDocs(tacosCollection);
        return tacosSnapshot.docs.map((doc) => doc.data());
      }

      // Function to generate HTML for menu items
      function generateMenuItemHTML(item) {
        return `
                    <div class="col">
                        <div class="card" id="card-${item.id}">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    <img src="${item.image}" class="img-fluid rounded-start" alt="${item.name}" />
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title">${item.name}</h5>
                                        <p class="card-text">${item.description}</p>
                                        <h6 class="card-price">$${item.price.toFixed(2)}</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>`;
      }
      // Function to adjust card height dynamically
      function adjustCardHeight() {
        const cards = document.querySelectorAll(".card");

        cards.forEach((card) => {
          const cardBody = card.querySelector(".card-body");
          const maxHeight = card.clientHeight; // Get the initial height of the card

          // Check if the content height exceeds the initial card height
          if (cardBody.scrollHeight > maxHeight) {
            const paddingAdjustment = cardBody.scrollHeight - maxHeight;
            card.style.paddingBottom = `${paddingAdjustment}px`;
          }
        });
      }
      // Call the function after the content is loaded
      document.addEventListener("DOMContentLoaded", adjustCardHeight);

      // Populate the menu with data from the "burgers" collection
      async function populateMenu() {
        const tacosMenu = document.getElementById("tacosMenu");
        const tacosData = await fetchTacos();

        tacosData.forEach((item) => {
          const menuItemHTML = generateMenuItemHTML(item);
          tacosMenu.innerHTML += menuItemHTML;
        });
      }

      // Call the populateMenu function when the page loads
      document.addEventListener("DOMContentLoaded", () => {
        populateMenu();
      });
    </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Load the sidebar content from an external file
        fetch('sidebar.html')
            .then(response => response.text())
            .then(data => {
                const sidebarContainer = document.getElementById('sidebar-container');
                sidebarContainer.innerHTML = data;
    
                // Highlight the active link after the sidebar has been loaded
                highlightActiveLink();
            })
            .catch(error => console.error('Error loading the sidebar:', error));
    });
    
    function highlightActiveLink() {
        const path = window.location.pathname;
        const page = path.split("/").pop();
    
        const links = document.querySelectorAll('#sidebar-container a');
        links.forEach(link => {
            if (link.getAttribute('href') === page) {
                link.classList.add('active'); // Add 'active' class
            }
        });
    }
    </script>
    
  </body>
</html>
